import{Q as V,m as A,l as d,R as C}from"../api_interface-Cwk1YCej.js";import{n as R,t as S}from"../core-B_o7srNM.js";import{a as f,u,r as a,j as m}from"../vendor_react-Bz04f6Pj.js";import{T as y,l}from"./data--un2_Xxz.js";import{E as b}from"../features-tA-DxrQa.js";const p=f([]),g=f([]),G={claimable:!1,nextClaimAt:0,rechargedAmount:"",wageredAmount:"",claimableAmount:""},c=f(G),w=f(y[0]);function j(){const[e,s]=u(w);return a.useMemo(()=>({currentTab:e,setCurrentTab:s}),[e,s])}const H=(e,s)=>{const n=a.useRef(null),[t,o]=a.useState(e||0);return a.useEffect(()=>(n.current=setInterval(()=>{o(r=>r<=1e3&&n.current?(clearInterval(n.current),s==null||s(),0):r-1e3)},1e3),()=>{n.current&&clearInterval(n.current)}),[e,s]),{millisecondsLeft:t}},P=()=>{const{data:e}=b(),[s]=u(p),[n]=u(g),[t]=u(c),o=a.useMemo(()=>(s==null?void 0:s.find((i,h)=>(e==null?void 0:e.level)===h))||0,[s,e==null?void 0:e.level]),r=a.useMemo(()=>t.rechargedAmount?parseInt(t.rechargedAmount)/(o??1)*100:0,[t.rechargedAmount,o]);return{levelScores:s,vipGifState:t,rebateConfig:n,vipLevelMoney:o,moneyProgress:r}};function T(){return[m(async(s,n)=>{try{const t=await V();t.success&&t.data&&n(g,t.data.vipRebateRate)}catch{n(g,[])}})]}function _(){return[m(async(s,n)=>{try{const t=await A();if(t.success&&t.data){const o=t.data.map(r=>r.levelScore);n(p,o)}}catch{n(p,[])}})]}function L(){return[m(async(s,n)=>{try{const t=await d();t.success&&t.data&&n(c,t.data)}catch{n(c,G)}})]}function Q(e){const{t:s}=R(l);return[m(async(t,o)=>{try{const r=await C();if(r.success&&r.data){S(s("success")),e==null||e();const i=await d();i.success&&i.data&&o(c,i.data)}}catch{o(c,G)}})]}function W(){const[e]=T(),[s]=L(),[n]=_();a.useEffect(()=>{e(),s(),n()},[])}export{P as a,H as b,Q as c,W as d,j as u};
