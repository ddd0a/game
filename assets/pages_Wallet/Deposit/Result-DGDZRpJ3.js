import{n as p,a as C}from"../../vendor_emotion-CZWcTM8j.js";import{u as h}from"../../core-B_o7srNM.js";import{g,C as y}from"../../features-tA-DxrQa.js";import{R as T,M as r}from"../../vendor_antd-DtS5X67P.js";import{u as x,r as c,b as E}from"../../vendor_react-Bz04f6Pj.js";import{s as R}from"./state-DgF92oDy.js";import{L as v}from"../../api_interface-Cwk1YCej.js";const D=()=>{const{data:e}=g(),[o,s]=x(R),{channelName:i,orderID:n,amount:m}=o||{},t=c.useMemo(()=>e==null?void 0:e.find(a=>a.name===i),[e,i]),u=E();c.useEffect(()=>{o||u("/wallet")},[o,u]);const{handleCancel:l,handleSuccess:d}=c.useMemo(()=>({handleCancel(){s(void 0)},handleSuccess(){s(void 0),setTimeout(y,1e3)}}),[s]),[f,P]=h(async()=>{if(!n)return;const a=await v({orderID:n});if(a.success)switch(a.data.status){case"CANCELED":r.alert({content:"The order has been canceled.",confirmText:"Got it",onConfirm:l});return;case"PENDING":r.alert({content:`The response from ${(t==null?void 0:t.displayName)??"provider"} has not yet been received. Please try again later.`,confirmText:"Got it"});return;case"COMPLETED":r.alert({content:`Top-up successful, amount: ${m}.`,confirmText:"Got it",onConfirm:d});return}},[n,t,m]);return C(N,{status:"waiting",title:"Waiting for payment result.",secondaryButtonText:"Cancel",onSecondaryButtonClick:l,primaryButtonText:"Already paid",onPrimaryButtonClick:f})},N=p(T)``;export{D as R};
