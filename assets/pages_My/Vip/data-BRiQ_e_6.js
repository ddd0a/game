import{l as h}from"../../api_interface-Cwk1YCej.js";import{r as y}from"../../vendor_react-Bz04f6Pj.js";import{l as E}from"../../core-B_o7srNM.js";import{E as I,I as b,J as N,K as R}from"../../features-tA-DxrQa.js";const D={level:0,score:0,currentLevel:0,claimable:!1,nextClaimAt:0,rechargedAmount:"0",wageredAmount:"0",claimableAmount:"0",currentScores:0,levelScores:[],scaleAngle:0,scaleCount:0,progress:0,levelsInfo:[],loading:!1,reload:async()=>{}},F=200;function j(){var m,f;const e=I(),{data:l,loading:i,reload:d}=b(),{result:a,loading:u,run:g}=E(h);return y.useMemo(()=>{var v,w;const V=e.loading||i||u,x=async()=>{await g(),await N(),await R(),await d()},p=l!=null&&l.length?l:[],r=p.map(s=>s.levelScore);let c=parseFloat(((v=a==null?void 0:a.data)==null?void 0:v.wageredAmount)??"");isNaN(c)&&(c=0);const n=((w=e==null?void 0:e.data)==null?void 0:w.level)??0;let t=r.length-1;t<0&&(t=0);let A=0;t>0&&(A=F/t);const C=function(){const s=r[n]??0,S=r[n+1]??0;let o=0;return n!==t&&S-s>0&&(o=(c-s)/(S-s),o<0?o=0:o>=1&&(o=.9999999)),o}(),L=n+C;return{...D,loading:V,reload:x,levelScores:r,currentScores:c,currentLevel:n,progress:L,scaleCount:t,scaleAngle:A,levelsInfo:p}},[i,d,(m=a==null?void 0:a.data)==null?void 0:m.wageredAmount,g,u,l,(f=e==null?void 0:e.data)==null?void 0:f.level,e.loading])}export{j as u};
