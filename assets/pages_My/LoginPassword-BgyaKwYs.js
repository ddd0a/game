import{a as e,j as c,F as b}from"../vendor_emotion-nEVkPYdj.js";import{B as x,C as q}from"../api_interface-Cuputjbr.js";import{c as P,F as f,d as o,I as l,b as S}from"../components-DVpIsGwS.js";import{u as L,t as y}from"../core-z1JMQ5Ff.js";import{c as T,u as v,D as B}from"../features-CK6znDLX.js";import{d as C,C as d}from"../vendor_react-DLFB9-kf.js";const A=()=>{var r;const i=(r=T().commonVariable.profile)==null?void 0:r.data;return i!=null&&i.hasLoginPassword?e(Y,{}):e(M,{})},M=()=>{const{handleSubmit:i,control:r,formState:{isSubmitted:u,isDirty:m,isValid:g}}=C(),[w,h]=L(x),p=v();return c(b,{children:[e(P,{}),c(f,{title:"Set login password",subTitle:"The password must be 8-16 characters long and must contain uppercase and lowercase letters, numbers and special characters",onSubmit:i(async a=>{(await w(a)).success&&(y("Successfully set login password",{level:"success"}),B({hasLoginPassword:!0}),p())}),children:[e(d,{control:r,name:"plainLoginPassword",rules:{required:"Password is required",minLength:{value:8,message:"Password length must be at least 8 characters"},maxLength:{value:16,message:"Password length must not exceed 16 characters"}},render:({field:{value:a,onChange:t,onBlur:n},fieldState:{error:s}})=>e(o,{errorMsg:s==null?void 0:s.message,children:e(l,{placeholder:"Please Create Your Password",autoFocus:!0,clearable:!0,type:"password",value:a,onChange:t,onBlur:n})})}),e(d,{control:r,name:"again",rules:{required:"Two inputs are inconsistent",validate:(a,t)=>a===t.plainLoginPassword?void 0:"Two inputs are inconsistent"},render:({field:{value:a,onChange:t,onBlur:n},fieldState:{error:s}})=>e(o,{errorMsg:s==null?void 0:s.message,children:e(l,{placeholder:"Confirm Your Password Again",clearable:!0,type:"password",value:a,onChange:t,onBlur:n})})}),e(S,{size:"large",type:"submit",loading:h,disabled:u?!g:!m,children:"Submit"})]})]})},Y=()=>{const{handleSubmit:i,control:r,formState:{isSubmitted:u,isDirty:m,isValid:g}}=C(),[w,h]=L(q),p=v();return c(b,{children:[e(P,{}),c(f,{title:"Change login password",subTitle:"The password must be 8-16 characters long and must contain uppercase and lowercase letters, numbers and special characters",onSubmit:i(async a=>{(await w(a)).success&&(y("Successfully change login password",{level:"success"}),p())}),children:[e(d,{control:r,name:"originPassword",rules:{required:"Current password is required",minLength:{value:8,message:"Password length must be at least 8 characters"},maxLength:{value:16,message:"Password length must not exceed 16 characters"}},render:({field:{value:a,onChange:t,onBlur:n},fieldState:{error:s}})=>e(o,{errorMsg:s==null?void 0:s.message,children:e(l,{placeholder:"Please Create Your Password",autoFocus:!0,clearable:!0,type:"password",value:a,onChange:t,onBlur:n})})}),e(d,{control:r,name:"newPassword",rules:{required:"New password is required",minLength:{value:8,message:"Password length must be at least 8 characters"},maxLength:{value:16,message:"Password length must not exceed 16 characters"}},render:({field:{value:a,onChange:t,onBlur:n},fieldState:{error:s}})=>e(o,{errorMsg:s==null?void 0:s.message,children:e(l,{placeholder:"Please Create Your New Password",clearable:!0,type:"password",value:a,onChange:t,onBlur:n})})}),e(d,{control:r,name:"again",rules:{required:"Two inputs are inconsistent",validate:(a,t)=>a===t.newPassword?void 0:"Two inputs are inconsistent"},render:({field:{value:a,onChange:t,onBlur:n},fieldState:{error:s}})=>e(o,{errorMsg:s==null?void 0:s.message,children:e(l,{type:"password",placeholder:"Confirm Your New Password Again",clearable:!0,value:a,onChange:t,onBlur:n})})}),e(S,{size:"large",type:"submit",loading:h,disabled:u?!g:!m,children:"Submit"})]})]})};export{A as L};
