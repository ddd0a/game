import{n as p,a as n,j as s,F as d}from"../vendor_emotion-nEVkPYdj.js";import{D as f}from"../api_interface-Cuputjbr.js";import{c as x,S as P,d as S,e as y,b as F,F as g}from"../components-DVpIsGwS.js";import{t as v}from"../core-z1JMQ5Ff.js";import{c as B,e as m,u as N,D as k,B as T}from"../features-CK6znDLX.js";import{d as C,C as D}from"../vendor_react-DLFB9-kf.js";const E=()=>{var e;const t=B().commonVariable.profile;return(e=t==null?void 0:t.data)!=null&&e.hasPhoneNumber?n("div",{children:"The form for unbinding the phone number is currently under development."}):s(d,{children:[n(x,{}),n(O,{})]})},L=p.div`
  font-size: 16rem;
  opacity: 0.5;
`,O=()=>{const{phoneNumber:t,result:e}=m("bind"),o=N();return t?n(P,{title:"Enter the code",subTitle:s(d,{children:[s("div",{children:["Please enter the ",e==null?void 0:e.codeLength,"-digit code sent to:"]}),s("b",{children:["+",t.countryCode," ",t.number]})]}),reason:"bind",onSubmit:async i=>{const r=e==null?void 0:e.id;if(!r){console.error("sms otp id not exists");return}(await f({smsOtpID:r,code:i})).success&&(v("Phone number successfully linked.",{level:"success"}),k({hasPhoneNumber:!0}),o())}}):n(I,{})},j={number:""},I=()=>{const{loading:t,send:e}=m("bind"),{handleSubmit:o,control:i,formState:{isSubmitted:r,isDirty:l,isValid:u}}=C({defaultValues:j});return n(d,{children:s(g,{title:"Link Your Phone Number",subTitle:"Please enter your phone number",onSubmit:o(e),children:[n(D,{control:i,name:"number",rules:{required:"Please enter mobile phone number",validate:T},render:({field:{value:c,onChange:h,onBlur:b},fieldState:{error:a}})=>n(S,{errorMsg:a==null?void 0:a.message,children:n(y,{autoFocus:!0,placeholder:"9xxxxxxxxx",clearable:!0,type:"tel",prefix:n(L,{children:"+63"}),value:c,onChange:h,onBlur:b})})}),n(F,{size:"large",type:"submit",loading:t,disabled:r?!u:!l,children:"Send OTP & Next"})]})})};export{E as P};
